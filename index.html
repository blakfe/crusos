<html><head><base href="." target="_blank">
<meta charset="UTF-8">
<title>Corrida Espacial Multiplayer</title>
<style>
body { 
    margin: 0;
    overflow: hidden;
    background: #000;
    font-family: Arial, sans-serif;
}

#gameCanvas {
    width: 100vw;
    height: 100vh;
    background: linear-gradient(to bottom, #000033, #000066);
}

.ship {
    position: absolute;
    width: 40px;
    height: 40px;
    transition: all 0.1s;
}

.player1 {
    background: red;
    clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
}

.player2 {
    background: blue;
    clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
}

.star {
    position: absolute;
    background: white;
    border-radius: 50%;
    animation: twinkle 1s infinite alternate;
}

@keyframes twinkle {
    from { opacity: 0.3; }
    to { opacity: 1; }
}

#scoreBoard {
    position: fixed;
    top: 20px;
    left: 20px;
    color: white;
    font-size: 24px;
    z-index: 100;
}

.powerup {
    position: absolute;
    width: 20px;
    height: 20px;
    background: yellow;
    border-radius: 50%;
    animation: pulse 1s infinite;
}

@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
}
</style>
</head>
<body>

<div id="scoreBoard">
    Jogador 1: <span id="score1">0</span> | Jogador 2: <span id="score2">0</span>
</div>
<div id="gameCanvas"></div>

<script>
class Game {
    constructor() {
        this.canvas = document.getElementById('gameCanvas');
        this.players = {
            player1: {
                element: this.createShip('player1'),
                x: window.innerWidth * 0.25,
                y: window.innerHeight - 100,
                score: 0,
                speed: 5
            },
            player2: {
                element: this.createShip('player2'),
                x: window.innerWidth * 0.75,
                y: window.innerHeight - 100,
                score: 0,
                speed: 5
            }
        };
        
        this.keys = {};
        this.powerups = [];
        this.setupControls();
        this.createStars();
        this.gameLoop();
        this.spawnPowerups();
    }

    createShip(playerClass) {
        const ship = document.createElement('div');
        ship.className = `ship ${playerClass}`;
        this.canvas.appendChild(ship);
        return ship;
    }

    createStars() {
        for (let i = 0; i < 100; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.width = Math.random() * 3 + 'px';
            star.style.height = star.style.width;
            star.style.left = Math.random() * window.innerWidth + 'px';
            star.style.top = Math.random() * window.innerHeight + 'px';
            this.canvas.appendChild(star);
        }
    }

    setupControls() {
        window.addEventListener('keydown', (e) => this.keys[e.key] = true);
        window.addEventListener('keyup', (e) => this.keys[e.key] = false);
    }

    movePlayer(player, left, right, up, down) {
        if (this.keys[left]) player.x -= player.speed;
        if (this.keys[right]) player.x += player.speed;
        if (this.keys[up]) player.y -= player.speed;
        if (this.keys[down]) player.y += player.speed;

        // Boundaries
        player.x = Math.max(0, Math.min(window.innerWidth - 40, player.x));
        player.y = Math.max(0, Math.min(window.innerHeight - 40, player.y));

        player.element.style.transform = `translate(${player.x}px, ${player.y}px)`;
    }

    spawnPowerups() {
        setInterval(() => {
            const powerup = document.createElement('div');
            powerup.className = 'powerup';
            powerup.style.left = Math.random() * (window.innerWidth - 20) + 'px';
            powerup.style.top = Math.random() * (window.innerHeight - 20) + 'px';
            this.canvas.appendChild(powerup);
            this.powerups.push({
                element: powerup,
                x: parseInt(powerup.style.left),
                y: parseInt(powerup.style.top)
            });

            setTimeout(() => {
                if (powerup.parentNode) {
                    powerup.parentNode.removeChild(powerup);
                    this.powerups = this.powerups.filter(p => p.element !== powerup);
                }
            }, 5000);
        }, 3000);
    }

    checkCollisions() {
        this.powerups.forEach((powerup, index) => {
            const checkCollision = (player) => {
                const dx = (player.x + 20) - (powerup.x + 10);
                const dy = (player.y + 20) - (powerup.y + 10);
                const distance = Math.sqrt(dx * dx + dy * dy);
                
                if (distance < 30) {
                    player.speed += 2;
                    player.score += 10;
                    document.getElementById('score1').textContent = this.players.player1.score;
                    document.getElementById('score2').textContent = this.players.player2.score;
                    
                    powerup.element.parentNode.removeChild(powerup.element);
                    this.powerups.splice(index, 1);

                    setTimeout(() => {
                        player.speed = Math.max(5, player.speed - 2);
                    }, 3000);
                }
            };

            checkCollision(this.players.player1);
            checkCollision(this.players.player2);
        });
    }

    gameLoop() {
        this.movePlayer(this.players.player1, 'ArrowLeft', 'ArrowRight', 'ArrowUp', 'ArrowDown');
        this.movePlayer(this.players.player2, 'a', 'd', 'w', 's');
        this.checkCollisions();
        requestAnimationFrame(() => this.gameLoop());
    }
}

// Start the game
window.onload = () => {
    new Game();
    alert('Controles:\nJogador 1: Setas direcionais\nJogador 2: WASD\nColete os power-ups amarelos para aumentar sua velocidade e pontuação!');
};
</script>
</body></html>
